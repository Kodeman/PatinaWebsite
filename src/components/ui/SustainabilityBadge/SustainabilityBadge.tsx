import { cn } from "@/lib/utils";
import type { SustainabilityBadge as SustainabilityBadgeType } from "@/types/sanity";
import { sustainabilityBadgeLabels } from "@/types/sanity";

export interface SustainabilityBadgeProps {
  badge: SustainabilityBadgeType;
  size?: "sm" | "md";
  showLabel?: boolean;
  className?: string;
}

const badgeIcons: Record<SustainabilityBadgeType, React.ReactNode> = {
  fsc: (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={1.5}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" />
    </svg>
  ),
  "carbon-neutral": (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={1.5}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
    </svg>
  ),
  recycled: (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={1.5}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" />
    </svg>
  ),
  local: (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={1.5}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
      <path strokeLinecap="round" strokeLinejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
    </svg>
  ),
  handmade: (
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={1.5}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M10.05 4.575a1.575 1.575 0 10-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 013.15 0v1.5m-3.15 0l.075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 013.15 0V15M6.9 7.575a1.575 1.575 0 10-3.15 0v8.175a6.75 6.75 0 006.75 6.75h2.018a5.25 5.25 0 003.712-1.538l1.732-1.732a5.25 5.25 0 001.538-3.712l.003-2.024a.668.668 0 01.198-.471 1.575 1.575 0 10-2.228-2.228 3.818 3.818 0 00-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0116.35 15m.002 0h-.002" />
    </svg>
  ),
};

const badgeColors: Record<SustainabilityBadgeType, string> = {
  fsc: "bg-emerald-500",
  "carbon-neutral": "bg-sky-500",
  recycled: "bg-teal-500",
  local: "bg-amber-500",
  handmade: "bg-rose-400",
};

export function SustainabilityBadge({
  badge,
  size = "sm",
  showLabel = false,
  className,
}: SustainabilityBadgeProps) {
  const label = sustainabilityBadgeLabels[badge];

  return (
    <div
      className={cn(
        "inline-flex items-center gap-1.5 bg-white/90 backdrop-blur-sm rounded-full",
        size === "sm" ? "px-2 py-1" : "px-3 py-1.5",
        className
      )}
      title={label}
    >
      <span
        className={cn(
          "rounded-full flex items-center justify-center text-white",
          badgeColors[badge],
          size === "sm" ? "w-4 h-4 p-0.5" : "w-5 h-5 p-1"
        )}
      >
        {badgeIcons[badge]}
      </span>
      {showLabel && (
        <span
          className={cn(
            "font-medium text-[var(--patina-charcoal)]",
            size === "sm" ? "text-[10px]" : "text-xs"
          )}
        >
          {label}
        </span>
      )}
    </div>
  );
}
